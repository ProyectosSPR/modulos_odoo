<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- ============================================== -->
        <!-- CATEGORIAS Y GRUPOS -->
        <!-- ============================================== -->

        <!-- Grupo: Usuario de Reputación ML -->
        <record id="group_mercadolibre_reputation_user" model="res.groups">
            <field name="name">MercadoLibre Reputación: Usuario</field>
            <field name="category_id" ref="mercadolibre_connector.module_category_mercadolibre"/>
            <field name="implied_ids" eval="[(4, ref('mercadolibre_connector.group_mercadolibre_user'))]"/>
        </record>

        <!-- Grupo: Administrador de Reputación ML -->
        <record id="group_mercadolibre_reputation_manager" model="res.groups">
            <field name="name">MercadoLibre Reputación: Administrador</field>
            <field name="category_id" ref="mercadolibre_connector.module_category_mercadolibre"/>
            <field name="implied_ids" eval="[(4, ref('group_mercadolibre_reputation_user'))]"/>
            <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
        </record>
    </data>

    <data noupdate="1">
        <!-- ============================================== -->
        <!-- REGLAS DE REGISTRO (Multi-compañía) -->
        <!-- ============================================== -->

        <!-- Regla: Reputación del Vendedor -->
        <record id="rule_mercadolibre_seller_reputation_company" model="ir.rule">
            <field name="name">Reputación ML: Ver de mi compañía</field>
            <field name="model_id" ref="model_mercadolibre_seller_reputation"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mercadolibre_reputation_user'))]"/>
        </record>

        <!-- Regla: Experiencia por Ítem -->
        <record id="rule_mercadolibre_item_experience_company" model="ir.rule">
            <field name="name">Experiencia Ítem ML: Ver de mi compañía</field>
            <field name="model_id" ref="model_mercadolibre_item_experience"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mercadolibre_reputation_user'))]"/>
        </record>

        <!-- Regla: Problemas de Experiencia -->
        <record id="rule_mercadolibre_item_experience_problem_company" model="ir.rule">
            <field name="name">Problemas Experiencia ML: Ver de mi compañía</field>
            <field name="model_id" ref="model_mercadolibre_item_experience_problem"/>
            <field name="domain_force">[('account_id.company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mercadolibre_reputation_user'))]"/>
        </record>

        <!-- Regla: Historial de Reputación -->
        <record id="rule_mercadolibre_reputation_history_company" model="ir.rule">
            <field name="name">Historial Reputación ML: Ver de mi compañía</field>
            <field name="model_id" ref="model_mercadolibre_reputation_history"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mercadolibre_reputation_user'))]"/>
        </record>

        <!-- Regla: Configuración de Sincronización -->
        <record id="rule_mercadolibre_reputation_sync_config_company" model="ir.rule">
            <field name="name">Config Sync Reputación ML: Ver de mi compañía</field>
            <field name="model_id" ref="model_mercadolibre_reputation_sync_config"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mercadolibre_reputation_user'))]"/>
        </record>
    </data>
</odoo>
