<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Editor Visual Form View (Fullscreen) -->
    <record id="view_ml_label_template_editor" model="ir.ui.view">
        <field name="name">ml.label.template.editor</field>
        <field name="model">ml.label.template</field>
        <field name="arch" type="xml">
            <form string="Editor Visual de Plantilla">
                <header>
                    <button string="Guardar y Cerrar" class="oe_highlight"
                            special="save" data-hotkey="s"/>
                    <button string="Cerrar sin Guardar" special="cancel"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1><field name="name" placeholder="Nombre de la plantilla..."/></h1>
                    </div>

                    <!-- Sección 1: Cargar PDF -->
                    <group string="1️⃣ Cargar PDF de Etiqueta">
                        <field name="sample_pdf" filename="sample_pdf_filename" widget="binary"/>
                        <field name="sample_pdf_filename" invisible="1"/>
                        <field name="pdf_width" string="Ancho (px)"/>
                        <field name="pdf_height" string="Alto (px)"/>
                    </group>

                    <separator string="2️⃣ Vista Previa del PDF"/>

                    <!-- Vista previa del PDF - Ocupa todo el ancho -->
                    <div style="width: 100%; min-height: 500px;">
                        <field name="sample_pdf" widget="label_editor" nolabel="1"/>
                        <field name="field_count" invisible="1"/>
                    </div>

                    <separator string="3️⃣ Campos Configurados"/>

                    <!-- Lista de campos - Debajo de la vista previa, todo el ancho -->
                    <field name="field_ids" nolabel="1">
                        <tree editable="bottom" create="true" delete="true">
                            <field name="sequence" widget="handle"/>
                            <field name="name"/>
                            <field name="field_type"/>
                            <field name="value"/>
                            <field name="position_x"/>
                            <field name="position_y"/>
                            <field name="font_size"/>
                            <field name="font_family"/>
                            <field name="color" widget="color"/>
                            <field name="align"/>
                            <field name="active" widget="boolean_toggle"/>
                        </tree>
                    </field>

                    <div class="alert alert-info" role="alert" style="margin: 20px 0;">
                        <strong><i class="fa fa-info-circle"/> Instrucciones:</strong>
                        <ul style="margin-bottom: 0; padding-left: 20px; margin-top: 10px;">
                            <li>Carga un PDF arriba si aún no lo has hecho</li>
                            <li>La vista previa se actualizará automáticamente</li>
                            <li>Agrega o edita campos en la lista de abajo</li>
                            <li>Usa el handle (☰) para reordenar campos</li>
                            <li>Toggle activo/inactivo para ocultar campos temporalmente</li>
                        </ul>
                    </div>

                </sheet>
            </form>
        </field>
    </record>


</odoo>
