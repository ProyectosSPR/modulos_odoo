<?xml version="1.0" ?>
<odoo>
    <record id="view_mercadolibre_playground_tree" model="ir.ui.view">
        <field name="name">mercadolibre.api.playground.tree</field>
        <field name="model">mercadolibre.api.playground</field>
        <field name="arch" type="xml">
            <tree string="API Playground">
                <field name="name"/>
                <field name="account_id"/>
                <field name="http_method"/>
                <field name="endpoint"/>
                <field name="category"/>
                <field name="status_badge"/>
                <field name="last_executed_at"/>
                <field name="is_favorite" widget="boolean_favorite" nolabel="1"/>
            </tree>
        </field>
    </record>
    <record id="view_mercadolibre_playground_form" model="ir.ui.view">
        <field name="name">mercadolibre.api.playground.form</field>
        <field name="model">mercadolibre.api.playground</field>
        <field name="arch" type="xml">
            <form string="API Playground">
                <header>
                    <button name="action_execute" string="Ejecutar Request" type="object" class="oe_highlight"/>
                    <button name="action_duplicate" string="Duplicar" type="object"/>
                    <button name="action_toggle_favorite" string="⭐ Favorito" type="object" class="btn-link"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="ej: Obtener info de usuario"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="account_id"/>
                            <field name="category"/>
                            <field name="auto_auth"/>
                        </group>
                        <group>
                            <field name="last_status_code" readonly="1"/>
                            <field name="execution_time" readonly="1" widget="float_time"/>
                            <field name="last_executed_at" readonly="1"/>
                        </group>
                    </group>
                    <group string="Request Configuration">
                        <group>
                            <label for="http_method"/>
                            <div class="o_row">
                                <field name="http_method" widget="radio" options="{'horizontal': true}"/>
                            </div>
                            <field name="endpoint" placeholder="/users/me"/>
                            <field name="full_url" readonly="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Body">
                            <field name="body" widget="ace" options="{'mode': 'json'}" placeholder="{&quot;key&quot;: &quot;value&quot;}"/>
                        </page>
                        <page string="Headers">
                            <field name="headers" widget="ace" options="{'mode': 'json'}" placeholder="{&quot;X-Custom-Header&quot;: &quot;value&quot;}"/>
                        </page>
                        <page string="Query Params">
                            <field name="query_params" widget="ace" options="{'mode': 'json'}" placeholder="{&quot;limit&quot;: 50, &quot;offset&quot;: 0}"/>
                        </page>
                        <page string="Response" attrs="{'invisible': [('last_response', '=', False)]}">
                            <group>
                                <field name="last_response" widget="ace" options="{'mode': 'json', 'readOnly': true}" nolabel="1"/>
                            </group>
                        </page>
                        <page string="Notas">
                            <field name="notes" placeholder="Notas sobre este endpoint..." nolabel="1"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <record id="view_mercadolibre_playground_search" model="ir.ui.view">
        <field name="name">mercadolibre.api.playground.search</field>
        <field name="model">mercadolibre.api.playground</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="endpoint"/>
                <field name="account_id"/>
                <filter name="favorites" string="Favoritos" domain="[('is_favorite', '=', True)]"/>
                <separator/>
                <filter name="get" string="GET" domain="[('http_method', '=', 'GET')]"/>
                <filter name="post" string="POST" domain="[('http_method', '=', 'POST')]"/>
                <separator/>
                <group expand="0" string="Agrupar Por">
                    <filter name="group_category" string="Categoría" context="{'group_by': 'category'}"/>
                    <filter name="group_account" string="Cuenta" context="{'group_by': 'account_id'}"/>
                    <filter name="group_method" string="Método" context="{'group_by': 'http_method'}"/>
                </group>
            </search>
        </field>
    </record>
    <record id="action_mercadolibre_playground" model="ir.actions.act_window">
        <field name="name">API Playground</field>
        <field name="res_model">mercadolibre.api.playground</field>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>
