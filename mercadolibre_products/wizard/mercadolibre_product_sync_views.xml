<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Form View -->
    <record id="view_mercadolibre_product_sync_form" model="ir.ui.view">
        <field name="name">mercadolibre.product.sync.form</field>
        <field name="model">mercadolibre.product.sync</field>
        <field name="arch" type="xml">
            <form string="Sincronizar Productos">
                <group attrs="{'invisible': [('state', '!=', 'draft')]}">
                    <group string="Cuenta">
                        <field name="account_id"/>
                    </group>
                    <group string="Modo">
                        <field name="sync_mode" widget="radio"/>
                    </group>
                </group>

                <group attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('sync_mode', '!=', 'specific')]}">
                    <field name="specific_item_id" placeholder="Ej: MLM1234567890"/>
                </group>

                <group attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('sync_mode', '!=', 'by_status')]}">
                    <field name="status_filter"/>
                </group>

                <group attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('sync_mode', '=', 'specific')]}">
                    <group string="Opciones">
                        <field name="limit"/>
                        <field name="auto_link"/>
                        <field name="link_method" attrs="{'invisible': [('auto_link', '=', False)]}"/>
                        <field name="sync_variations"/>
                    </group>
                </group>

                <!-- Resultados -->
                <group attrs="{'invisible': [('state', '=', 'draft')]}">
                    <group string="Resultados">
                        <field name="sync_count"/>
                        <field name="created_count"/>
                        <field name="updated_count"/>
                        <field name="linked_count"/>
                        <field name="error_count"/>
                    </group>
                </group>

                <group attrs="{'invisible': [('sync_log', '=', False)]}">
                    <field name="sync_log" nolabel="1" readonly="1"
                           style="font-family: monospace; background: #f5f5f5; padding: 10px;"/>
                </group>

                <field name="state" invisible="1"/>

                <footer attrs="{'invisible': [('state', '!=', 'draft')]}">
                    <button name="action_sync" type="object"
                            string="Sincronizar" class="btn-primary"/>
                    <button string="Cancelar" class="btn-secondary" special="cancel"/>
                </footer>

                <footer attrs="{'invisible': [('state', '=', 'draft')]}">
                    <button name="action_view_items" type="object"
                            string="Ver Items" class="btn-primary"/>
                    <button name="action_new_sync" type="object"
                            string="Nueva Sincronizacion" class="btn-secondary"/>
                    <button string="Cerrar" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
</odoo>
